{"version":3,"file":"Router.js","sourceRoot":"","sources":["../../src/ReactRouter/Router.tsx"],"names":[],"mappings":"AAOA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAuB,SAAS,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAC;AAE9E,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,UAAU,CAAC;AACjD,OAAO,EAAE,eAAe,EAAE,MAAM,0BAA0B,CAAC;AAE3D,OAAO,EAAE,UAAU,EAAE,MAAM,cAAc,CAAC;AAC1C,OAAO,EACL,mBAAmB,GAEpB,MAAM,uBAAuB,CAAC;AAE/B,OAAO,EAAa,UAAU,EAAE,MAAM,cAAc,CAAC;AAsBrD,MAAM,OAAO,YAAa,SAAQ,KAAK,CAAC,SAGvC;IAWC,YAAY,KAAwB;QAClC,KAAK,CAAC,KAAK,CAAC,CAAC;QAPf,oBAAe,GAAG,IAAI,eAAe,EAAE,CAAC;QACxC,WAAM,GAA+C,EAAE,CAAC;QACxD,mBAAc,GAAmC,EAAE,CAAC;QACpD,kBAAa,GAAiD,EAAE,CAAC;QACjE,gBAAW,GAAG,IAAI,CAAC;QAIjB,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CACvD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAC9B,CAAC;QACF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjD,IAAI,CAAC,KAAK,GAAG;YACX,UAAU,EAAE,IAAI,UAAU,EAAE;YAC5B,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;YAClC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC;YAC5C,eAAe,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC;YAChD,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;YAClC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;YACpC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;SACnC,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC;YACvB,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI;YAC1B,GAAG,EAAE,UAAU,EAAE;YACjB,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ;YAClC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;YAC9B,KAAK,EAAE,EAAE;SACV,CAAC,CAAC;IACL,CAAC;IAED,kBAAkB,CAChB,UAA+B,EAC/B,SAA4B;QAE5B,+DAA+D;QAC/D,IACE,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,SAAS,CAAC,QAAQ,KAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;YACnE,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,EACtC;YACA,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,UAAU,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YAC1E,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,QAAS,EAAE,IAAI,CAAC,KAAK,CAAC,MAAO,EAAE,UAAU,CAAC,CAAC;SAC1E;IACH,CAAC;IAED,oBAAoB;QAClB,IAAI,IAAI,CAAC,wBAAwB,EAAE;YACjC,IAAI,CAAC,wBAAwB,EAAE,CAAC;SACjC;IACH,CAAC;IAED,QAAQ,CAAC,EAAU;QACjB,OAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC;IAED,QAAQ,CAAC,MAAc;QACrB,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,UAAU,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC1E,MAAM,EAAE,IAAI,EAAE,GAAG,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;QACrD,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;YAClB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;YACxB,IAAI,CAAC,GAAG,GAAG,UAAU,EAAE,CAAC;YACxB,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC;gBACZ,UAAU;aACX,CAAC,CAAC;SACJ;IACH,CAAC;IAED,aAAa,CACX,QAAwC,EACxC,MAAqB;QAErB,MAAM,aAAa,GACjB,IAAI,CAAC,oBAAoB,KAAK,KAAK;YACjC,CAAC,CAAC,KAAK;YACP,CAAC,CAAE,MAAM,CAAC,WAAW,EAAoB,CAAC;QAC9C,IAAI,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAE3C,IAAI,aAAa,KAAK,MAAM,EAAE;YAC5B,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SACpC;aAAM,IAAI,aAAa,KAAK,KAAK,EAAE;YAClC,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;YAC3B,SAAS,GAAG,SAAS,IAAI,MAAM,CAAC;SACjC;aAAM,IAAI,aAAa,KAAK,SAAS,EAAE;YACtC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YACvC,SAAS,GAAG,MAAM,CAAC;SACpB;QAED,IAAI,SAAS,KAAK,MAAM,EAAE;YACxB,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;YAC7B,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SACpC;QAED,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,IAAI,EAAE,SAAS,EAAE,CAAC;QACjD,IAAI,CAAC,QAAQ,CAAC;YACZ,QAAQ;YACR,MAAM,EAAE,aAA8B;SACvC,CAAC,CAAC;QACH,IAAI,CAAC,qBAAqB,GAAG,SAAS,CAAC;QACvC,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC;IACxC,CAAC;IAED,aAAa,CACX,QAAwC,EACxC,MAAqB,EACrB,UAAsB;QAEtB,IAAI,SAAS,GACX,CAAC,QAAQ,CAAC,KAAK,IAAI,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC;QAC5D,IAAI,WAAiC,CAAC;QACtC,MAAM,aAAa,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC;QAC3C,IAAI,oBAAoB,GAAG,KAAK,CAAC;QACjC,IAAI,eAAmC,CAAC;QAExC,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YAC1B,MAAM,EACJ,IAAI,EAAE,YAAY,EAClB,SAAS,EAAE,iBAAiB,EAC5B,KAAK,GACN,GAAG,UAAU,CAAC,sBAAsB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YACrD,IAAI,CAAC,YAAY,IAAI,CAAC,iBAAiB,EAAE;gBACvC,OAAO;aACR;YAED,WAAW,GAAG,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC;YAEpE,IAAI,YAAY,CAAC,SAAS,EAAE;gBAC1B,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC;gBACzB,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;gBAC1B,YAAY,CAAC,SAAS,CAAC,KAAK,GAAG,KAAM,CAAC;gBACtC,oBAAoB,GAAG,IAAI,CAAC;gBAE5B,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC,EAAE,CAAC;gBAEtC,IAAI,WAAW,EAAE;oBACf,IAAI,MAAM,KAAK,MAAM,IAAI,SAAS,KAAK,SAAS,EAAE;wBAChD;;;2BAGG;wBACH,YAAY,CAAC,MAAM,GAAG,WAAW,CAAC,EAAE,CAAC;qBACtC;yBAAM,IAAI,SAAS,KAAK,MAAM,EAAE;wBAC/B,WAAW,CAAC,KAAK,GAAG,KAAK,CAAC;wBAC1B,IAAI,CAAC,mBAAmB,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;qBAC3D;oBAED,eAAe;wBACb,YAAY,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE;4BAChC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,SAAS;4BAC/C,CAAC,CAAC,SAAS,CAAC;iBACjB;qBAAM;oBACL,uEAAuE;oBACvE,SAAS,GAAG,SAAS,CAAC;iBACvB;aACF;iBAAM;gBACL,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC;gBACzB,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;gBAC1B,YAAY,CAAC,SAAS,CAAC,KAAK,GAAG,KAAM,CAAC;aACvC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,WAAW,EAAE;YACf,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;gBAC1B,WAAW,CAAC,KAAK,GAAG,KAAK,CAAC;gBAC1B,WAAW,CAAC,IAAI,GAAG,KAAK,CAAC;aAC1B;SACF;QAED,IAAI,CAAC,QAAQ,CACX;YACE,UAAU;SACX,EACD,GAAG,EAAE;YACH,IAAI,oBAAoB,EAAE;gBACxB,MAAM,EACJ,IAAI,EAAE,YAAY,EAClB,SAAS,GACV,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBAChE,IAAI,YAAY,IAAI,SAAS,EAAE;oBAC7B,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;oBACxD,MAAM,SAAS,GACb,WAAW,IAAI,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;oBACrD,IAAI,UAAU,EAAE;wBACd,IAAI,YAAsC,CAAC;wBAC3C,IAAI,SAAS,IAAI,SAAS,CAAC,SAAS,KAAK,EAAE,EAAE;4BAC3C,mCAAmC;4BACnC,YAAY,GAAG,SAAS,CAAC;yBAC1B;6BAAM,IAAI,SAAS,KAAK,MAAM,IAAI,SAAS,KAAK,MAAM,EAAE;4BACvD,YAAY,GAAG,SAAS,CAAC;yBAC1B;6BAAM;4BACL,YAAY,GAAG,SAAS,CAAC;yBAC1B;wBACD,MAAM,YAAY,GAAG,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC;wBAC3C,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;wBACtD,IAAI,CAAC,UAAU,CACb,UAAW,EACX,SAAU,EACV,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,eAAe,CAChB,CAAC;qBACH;yBAAM,IAAI,SAAS,EAAE;wBACpB,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;wBAC1C,SAAS,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;qBAC/C;iBACF;gBAED,6DAA6D;gBAC7D,IAAI,SAAS,EAAE,EAAE;oBACf,IACE,YAAY;wBACZ,YAAY,CAAC,SAAS,CAAC,KAAM,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EACvD;wBACA,UAAU,CAAC,GAAG,EAAE;4BACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,gBAAgB,CACrD,IAAI,CAAC,cAAc,CACpB,CAAC;4BACF,IAAI,IAAK,CAAC,SAAS,CAAC,KAAM,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE;gCACpD,OAAO,CAAC,IAAI,CACV,uFAAuF,CACxF,CAAC;6BACH;wBACH,CAAC,EAAE,GAAG,CAAC,CAAC;qBACT;iBACF;aACF;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAED,mBAAmB,CAAC,IAAc,EAAE,SAAoB;QACtD,wGAAwG;QACxG,yDAAyD;QACzD,MAAM,aAAa,GAAG,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;QACxE,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YACxB,2CAA2C;YAC3C,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,cAAc,EAAE;gBAChC,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;gBAEvC,oEAAoE;gBACpE,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;gBACvC,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;oBAC7C,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC;oBACf,CAAC,CAAC,SAAS,GAAG,KAAK,CAAC;oBACpB,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC;oBACrB,CAAC,CAAC,GAAG,GAAG,UAAU,EAAE,CAAC;oBACrB,OAAO,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;iBAClC;gBACD,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;aACjB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,aAAa,CACX,EAAU,EACV,QAAa,EACb,YAAuC;QAEvC,MAAM,KAAK,GAAe,EAAE,CAAC;QAC7B,IAAI,QAA4B,CAAC;QACjC,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAuB,CAAC;QAC3E,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,KAAK,CAAC,QAAQ,CAAC,OAAO,CACpB,cAAc,CAAC,KAAK,CAAC,QAAQ,EAC7B,CAAC,KAAyB,EAAE,EAAE;YAC5B,MAAM,OAAO,GAAG,UAAU,EAAE,CAAC;YAC7B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;YAC7B,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC1E,CAAC,CACF,CAAC;QAEF,IAAI,CAAC,UAAU,EAAE;YACf,MAAM,aAAa,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;gBACnC,8FAA8F;gBAC9F,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC;YACtE,CAAC,CAAC,CAAC;YACH,IAAI,aAAa,EAAE;gBACjB,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC;aAC3B;SACF;QAED,IAAI,CAAC,iBAAiB,CACpB,EAAE,EACF,QAAQ,EACR,KAAK,EACL,YAAY,EACZ,IAAI,CAAC,KAAK,CAAC,QAAQ,CACpB,CAAC;QAEF,SAAS,cAAc,CACrB,KAA8B,EAC9B,OAAe,EACf,QAAyB;YAEzB,MAAM,MAAM,GAAG,UAAU,EAAE,CAAC;YAC5B,MAAM,GAAG,GAAG,UAAU,EAAE,CAAC;YAEzB,uBAAuB;YACvB,MAAM,UAAU,GAAG;gBACjB,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,KAAK;gBACxB,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI;gBAC1C,SAAS,EAAE,KAAK,CAAC,KAAK,CAAC,SAAS;aACjC,CAAC;YACF,MAAM,KAAK,GAAyB,SAAS,CAC3C,QAAQ,CAAC,QAAQ,EACjB,UAAU,CACX,CAAC;YACF,MAAM,IAAI,GAA0B;gBAClC,EAAE,EAAE,MAAM;gBACV,GAAG;gBACH,SAAS,EAAE;oBACT,KAAK;oBACL,UAAU,EAAE,KAAK,CAAC,KAAK;iBACxB;gBACD,OAAO;gBACP,KAAK,EAAE,IAAI;gBACX,IAAI,EAAE,CAAC,CAAC,KAAK;gBACb,SAAS,EAAE,KAAK;aACjB,CAAC;YACF,IAAI,KAAK,IAAI,IAAI,CAAC,SAAS,EAAE;gBAC3B,QAAQ,GAAG,MAAM,CAAC;aACnB;YACD,IAAI,CAAC,UAAU,IAAI,KAAK,EAAE;gBACxB,UAAU,GAAG,IAAI,CAAC;aACnB;YACD,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IAED,iBAAiB,CACf,KAAa,EACb,QAA4B,EAC5B,UAAsB,EACtB,YAAuC,EACvC,SAA0B;QAE1B,IAAI,CAAC,QAAQ,CACX,SAAS,CAAC,EAAE;YACV,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAClC,IAAI,UAAU,EAAE,EAChB,SAAS,CAAC,UAAU,CACrB,CAAC;YACF,MAAM,QAAQ,GAAc;gBAC1B,EAAE,EAAE,KAAK;gBACT,KAAK,EAAE,UAAU;aAClB,CAAC;YACF,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,YAAY,CAAC;YACzC,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;aAChC;YACD,cAAc,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YACpC,OAAO;gBACL,UAAU,EAAE,cAAc;aAC3B,CAAC;QACJ,CAAC,EACD,GAAG,EAAE;YACH,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;QACvC,CAAC,CACF,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,iBAAiB,CAAC,YAAuC;QAC7D,MAAM,QAAQ,GAAG,GAAG,EAAE;YACpB,MAAM,YAAY,GAAG,KAAK,CAAC;YAC3B,IAAI,YAAY,EAAE;gBAChB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,gBAAgB,CACrD,IAAI,CAAC,cAAc,CACpB,CAAC;gBACF,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC;aAChC;iBAAM;gBACL,OAAO,KAAK,CAAC;aACd;QACH,CAAC,CAAC;QAEF,MAAM,OAAO,GAAG,GAAG,EAAE;YACnB,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC,CAAC;QACF,YAAY,CAAC,YAAY,GAAG;YAC1B,QAAQ;YACR,OAAO;YACP,KAAK,EAAE,eAAe,CAAC,EAAE,CAAC,IAAI;SAC/B,CAAC;IACJ,CAAC;IAED,eAAe,CAAC,KAAa;QAC3B,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,UAAU,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC1E,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC;YACZ,UAAU;SACX,CAAC,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,IAAiB,EAAE,MAAc;QACxC,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,UAAU,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC1E,MAAM,EAAE,IAAI,EAAE,GAAG,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;QACrD,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;YACpC,IAAI,CAAC,aAAa,CAChB,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAC1C,IAAI,CAAC,KAAK,CAAC,MAAO,EAClB,UAAU,CACX,CAAC;SACH;IACH,CAAC;IAED,SAAS,CAAC,YAAiB;QACzB,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CACxC,YAAY,CACS,CAAC;QAExB,KAAK,CAAC,QAAQ,CAAC,OAAO,CACpB,cAAc,CAAC,KAAK,CAAC,QAAQ,EAC7B,CAAC,KAAyB,EAAE,EAAE;YAC5B,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE;gBAClC,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACpC,IACE,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC;oBACpC,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC;oBACxC,KAAK,CAAC,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,KAAK,CAAC,KAAK;oBACvC,KAAK,CAAC,KAAK,CAAC,EAAE,KAAK,KAAK,CAAC,KAAK,CAAC,EAAE,EACjC;oBACA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;iBAC/B;aACF;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,UAAU,CACtB,UAAuB,EACvB,SAAsB,EACtB,cAAyC,EACzC,SAAwB,EACxB,UAAoB,EACpB,eAAwB;QAExB,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,CAAC,kBAAkB,IAAI,cAAc,CAAC,EAAE;gBAC3C,MAAM,0BAA0B,CAAC,cAAc,CAAC,CAAC;aAClD;YAED,IAAI,UAAU,KAAK,SAAS,IAAI,SAAS,IAAI,eAAe,EAAE;gBAC5D,0DAA0D;gBAC1D,kDAAkD;gBAClD,MAAM,iBAAiB,GAAG,gBAAgB,CAAC,eAAe,CAAC,CAAC;gBAC5D,cAAc,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;gBAC9C,MAAM,cAAc,CAAC,MAAM,CAAC,UAAU,EAAE,iBAAiB,EAAE;oBACzD,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS;oBACjD,SAAS;oBACT,UAAU;oBACV,iBAAiB,EAAE,KAAK;iBACzB,CAAC,CAAC;gBACH,cAAc,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;aAC/C;iBAAM;gBACL,MAAM,cAAc,CAAC,MAAM,CAAC,UAAU,EAAE,SAAS,EAAE;oBACjD,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS;oBACjD,SAAS;oBACT,UAAU;oBACV,iBAAiB,EAAE,KAAK;iBACzB,CAAC,CAAC;aACJ;YAED,IAAI,SAAS,IAAI,UAAU,KAAK,SAAS,EAAE;gBACzC,4BAA4B;gBAC5B,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;gBAC1C,SAAS,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;aAC/C;SACF;aAAM;YACL,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;YACjD,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;YAChC,UAAU,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACvD,UAAU,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC1B;IACH,CAAC;IAED,cAAc,CACZ,aAA4B,EAC5B,IAAY,EACZ,SAA2B;QAE3B,IAAI,CAAC,oBAAoB,GAAG,aAAa,CAAC;QAC1C,QAAQ,aAAa,EAAE;YACrB,KAAK,MAAM;gBACT,IAAI,CAAC,qBAAqB,GAAG,SAAS,CAAC;gBACvC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC9B,MAAM;YACR,KAAK,KAAK;gBACR,IAAI,CAAC,qBAAqB,GAAG,SAAS,IAAI,MAAM,CAAC;gBACjD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBACjC,MAAM;YACR,KAAK,SAAS;gBACZ,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC;gBACpC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBACjC,MAAM;SACT;IACH,CAAC;IAED,YAAY,CAAC,WAAoB;QAC/B,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,gBAAgB,CAClE,IAAI,CAAC,cAAc,CACpB,CAAC;QACF,IAAI,WAAW,EAAE;YACf,IAAI,WAAW,CAAC,EAAE,KAAK,WAAW,CAAC,MAAM,EAAE;gBACzC,MAAM,gBAAgB,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;gBACzD,IAAI,gBAAgB,EAAE;oBACpB,IAAI,CAAC,cAAc,CACjB,KAAK,EACL,gBAAgB,CAAC,QAAQ,GAAG,gBAAgB,CAAC,MAAM,CACpD,CAAC;iBACH;qBAAM;oBACL,WAAW,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;iBACxD;aACF;iBAAM;gBACL,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,gBAAgB,CACnE,WAAW,CAAC,MAAM,CACnB,CAAC;gBACF,IAAI,YAAY,EAAE;oBAChB,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAC7D,YAAY,CAAC,SAAS,CAAC,KAAM,CAAC,GAAG,CAClC,CAAC;oBACF,IAAI,YAAY,EAAE;wBAChB,IAAI,CAAC,cAAc,CACjB,KAAK,EACL,YAAY,CAAC,QAAQ,GAAG,YAAY,CAAC,MAAM,CAC5C,CAAC;qBACH;yBAAM;wBACL,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,YAAY,CAAC,SAAS,CAAC,KAAM,CAAC,GAAG,CAAC,CAAC;qBAC/D;iBACF;qBAAM;oBACL,MAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;oBACxD,IAAI,eAAe,EAAE;wBACnB,IAAI,CAAC,cAAc,CACjB,KAAK,EACL,eAAe,CAAC,QAAQ,GAAG,eAAe,CAAC,MAAM,CAClD,CAAC;qBACH;yBAAM;wBACL,IAAI,WAAW,EAAE;4BACf,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;yBACzC;qBACF;iBACF;aACF;SACF;aAAM;YACL,IAAI,WAAW,EAAE;gBACf,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC;aACrD;SACF;IACH,CAAC;IAED,MAAM;QACJ,OAAO,CACL,oBAAC,mBAAmB,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,KAAK;YAC7C,oBAAC,UAAU,oBACL,IAAI,CAAC,KAAK,IACd,cAAc,EAAE,IAAI,CAAC,YAAY,EACjC,UAAU,EAAE,IAAI,CAAC,cAAc,KAE9B,IAAI,CAAC,KAAK,CAAC,QAAQ,CACT,CACgB,CAChC,CAAC;IACJ,CAAC;CACF;AAED,SAAS,gBAAgB,CAAC,eAAuB;IAC/C,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC5C,KAAK,CAAC,SAAS,GAAG,eAAe,CAAC;IAClC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;IACtC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IACxB,4EAA4E;IAC5E,MAAM,YAAY,GAAG,KAAK,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,CAAC;IAClE,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE;QACnB,YAAY,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC;KAChC;IACD,OAAO,KAAK,CAAC,UAAyB,CAAC;AACzC,CAAC;AAED,KAAK,UAAU,0BAA0B,CACvC,cAAyC;IAEzC,IAAI,kBAAkB,IAAI,cAAc,EAAE;QACxC,OAAO;KACR;SAAM;QACL,UAAU,CAAC,GAAG,EAAE;YACd,0BAA0B,CAAC,cAAc,CAAC,CAAC;QAC7C,CAAC,EAAE,CAAC,CAAC,CAAC;KACP;AACH,CAAC;AAED,MAAM,CAAC,MAAM,sBAAsB,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC;AAC/D,sBAAsB,CAAC,WAAW,GAAG,cAAc,CAAC","sourcesContent":["// import { NavDirection } from \"@wilfredlopez/react\";\nimport { RouterDirection } from '@wilfredlopez/wl-components/dist/types/interfaces/RouterDirection';\nimport {\n  Action as HistoryAction,\n  Location as HistoryLocation,\n  UnregisterCallback,\n} from 'history';\nimport React from 'react';\nimport { RouteComponentProps, matchPath, withRouter } from 'react-router-dom';\n\nimport { generateId, isDevMode } from '../utils';\nimport { LocationHistory } from '../utils/LocationHistory';\n\nimport { NavManager } from './NavManager';\nimport {\n  RouteManagerContext,\n  RouteManagerContextState,\n} from './RouteManagerContext';\nimport { ViewItem } from './ViewItem';\nimport { ViewStack, ViewStacks } from './ViewStacks';\nimport { WlRouteData } from './WlRouteData';\nimport { WlRouteAction } from './wlRouteAction';\n\nexport type NavDirection = 'back' | 'forward';\n\n// import { getConfig } from \"@wilfredlopez/react\";\n\nexport interface LocationState {\n  direction?: RouterDirection;\n  action?: WlRouteAction;\n}\n\ninterface RouteManagerProps extends RouteComponentProps<{}, {}, LocationState> {\n  location: HistoryLocation<LocationState>;\n}\n\ninterface RouteManagerState extends RouteManagerContextState {\n  location?: HistoryLocation<LocationState>;\n  action?: WlRouteAction;\n}\n\nexport class RouteManager extends React.Component<\n  RouteManagerProps,\n  RouteManagerState\n> {\n  listenUnregisterCallback: UnregisterCallback | undefined;\n  activeWlPageId?: string;\n  currentWlRouteAction?: WlRouteAction;\n  currentRouteDirection?: RouterDirection;\n  locationHistory = new LocationHistory();\n  routes: { [key: string]: React.ReactElement<any> } = {};\n  wlPageElements: { [key: string]: HTMLElement } = {};\n  routerOutlets: { [key: string]: HTMLWlRouterOutletElement } = {};\n  firstRender = true;\n\n  constructor(props: RouteManagerProps) {\n    super(props);\n    this.listenUnregisterCallback = this.props.history.listen(\n      this.historyChange.bind(this)\n    );\n    this.handleNavigate = this.handleNavigate.bind(this);\n    this.navigateBack = this.navigateBack.bind(this);\n    this.state = {\n      viewStacks: new ViewStacks(),\n      hideView: this.hideView.bind(this),\n      setupWlRouter: this.setupWlRouter.bind(this),\n      removeViewStack: this.removeViewStack.bind(this),\n      syncView: this.syncView.bind(this),\n      syncRoute: this.syncRoute.bind(this),\n      getRoute: this.getRoute.bind(this),\n    };\n\n    this.locationHistory.add({\n      hash: window.location.hash,\n      key: generateId(),\n      pathname: window.location.pathname,\n      search: window.location.search,\n      state: {},\n    });\n  }\n\n  componentDidUpdate(\n    _prevProps: RouteComponentProps,\n    prevState: RouteManagerState\n  ) {\n    // Trigger a page change if the location or action is different\n    if (\n      (this.state.location && prevState.location !== this.state.location) ||\n      prevState.action !== this.state.action\n    ) {\n      const viewStacks = Object.assign(new ViewStacks(), this.state.viewStacks);\n      this.setActiveView(this.state.location!, this.state.action!, viewStacks);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenUnregisterCallback) {\n      this.listenUnregisterCallback();\n    }\n  }\n\n  getRoute(id: string) {\n    return this.routes[id];\n  }\n\n  hideView(viewId: string) {\n    const viewStacks = Object.assign(new ViewStacks(), this.state.viewStacks);\n    const { view } = viewStacks.findViewInfoById(viewId);\n    if (view) {\n      view.show = false;\n      view.isWlRoute = false;\n      view.prevId = undefined;\n      view.key = generateId();\n      delete this.wlPageElements[view.id];\n      this.setState({\n        viewStacks,\n      });\n    }\n  }\n\n  historyChange(\n    location: HistoryLocation<LocationState>,\n    action: HistoryAction\n  ) {\n    const wlRouteAction =\n      this.currentWlRouteAction === 'pop'\n        ? 'pop'\n        : (action.toLowerCase() as WlRouteAction);\n    let direction = this.currentRouteDirection;\n\n    if (wlRouteAction === 'push') {\n      this.locationHistory.add(location);\n    } else if (wlRouteAction === 'pop') {\n      this.locationHistory.pop();\n      direction = direction || 'back';\n    } else if (wlRouteAction === 'replace') {\n      this.locationHistory.replace(location);\n      direction = 'none';\n    }\n\n    if (direction === 'root') {\n      this.locationHistory.clear();\n      this.locationHistory.add(location);\n    }\n\n    location.state = location.state || { direction };\n    this.setState({\n      location,\n      action: wlRouteAction as WlRouteAction,\n    });\n    this.currentRouteDirection = undefined;\n    this.currentWlRouteAction = undefined;\n  }\n\n  setActiveView(\n    location: HistoryLocation<LocationState>,\n    action: WlRouteAction,\n    viewStacks: ViewStacks\n  ) {\n    let direction: RouterDirection | undefined =\n      (location.state && location.state.direction) || 'forward';\n    let leavingView: ViewItem | undefined;\n    const viewStackKeys = viewStacks.getKeys();\n    let shouldTransitionPage = false;\n    let leavingViewHtml: string | undefined;\n\n    viewStackKeys.forEach(key => {\n      const {\n        view: enteringView,\n        viewStack: enteringViewStack,\n        match,\n      } = viewStacks.findViewInfoByLocation(location, key);\n      if (!enteringView || !enteringViewStack) {\n        return;\n      }\n\n      leavingView = viewStacks.findViewInfoById(this.activeWlPageId).view;\n\n      if (enteringView.isWlRoute) {\n        enteringView.show = true;\n        enteringView.mount = true;\n        enteringView.routeData.match = match!;\n        shouldTransitionPage = true;\n\n        this.activeWlPageId = enteringView.id;\n\n        if (leavingView) {\n          if (action === 'push' && direction === 'forward') {\n            /**\n             * If the page is being pushed into the stack by another view,\n             * record the view that originally directed to the new view for back button purposes.\n             */\n            enteringView.prevId = leavingView.id;\n          } else if (direction !== 'none') {\n            leavingView.mount = false;\n            this.removeOrphanedViews(enteringView, enteringViewStack);\n          }\n\n          leavingViewHtml =\n            enteringView.id === leavingView.id\n              ? this.wlPageElements[leavingView.id].outerHTML\n              : undefined;\n        } else {\n          // If there is not a leavingView, then we shouldn't provide a direction\n          direction = undefined;\n        }\n      } else {\n        enteringView.show = true;\n        enteringView.mount = true;\n        enteringView.routeData.match = match!;\n      }\n    });\n\n    if (leavingView) {\n      if (!leavingView.isWlRoute) {\n        leavingView.mount = false;\n        leavingView.show = false;\n      }\n    }\n\n    this.setState(\n      {\n        viewStacks,\n      },\n      () => {\n        if (shouldTransitionPage) {\n          const {\n            view: enteringView,\n            viewStack,\n          } = this.state.viewStacks.findViewInfoById(this.activeWlPageId);\n          if (enteringView && viewStack) {\n            const enteringEl = this.wlPageElements[enteringView.id];\n            const leavingEl =\n              leavingView && this.wlPageElements[leavingView.id];\n            if (enteringEl) {\n              let navDirection: NavDirection | undefined;\n              if (leavingEl && leavingEl.innerHTML === '') {\n                // Don't animate from an empty view\n                navDirection = undefined;\n              } else if (direction === 'none' || direction === 'root') {\n                navDirection = undefined;\n              } else {\n                navDirection = direction;\n              }\n              const shouldGoBack = !!enteringView.prevId;\n              const routerOutlet = this.routerOutlets[viewStack.id];\n              this.commitView(\n                enteringEl!,\n                leavingEl!,\n                routerOutlet,\n                navDirection,\n                shouldGoBack,\n                leavingViewHtml\n              );\n            } else if (leavingEl) {\n              leavingEl.classList.add('wl-page-hidden');\n              leavingEl.setAttribute('aria-hidden', 'true');\n            }\n          }\n\n          // Warn if an wl-page was not eventually rendered in Dev Mode\n          if (isDevMode()) {\n            if (\n              enteringView &&\n              enteringView.routeData.match!.url !== location.pathname\n            ) {\n              setTimeout(() => {\n                const { view } = this.state.viewStacks.findViewInfoById(\n                  this.activeWlPageId\n                );\n                if (view!.routeData.match!.url !== location.pathname) {\n                  console.warn(\n                    'No WlPage was found to render. Make sure you wrap your page with an WlPage component.'\n                  );\n                }\n              }, 100);\n            }\n          }\n        }\n      }\n    );\n  }\n\n  removeOrphanedViews(view: ViewItem, viewStack: ViewStack) {\n    // Note: This technique is a bit wonky for views that reference each other and get into a circular loop.\n    // It can still remove a view that probably shouldn't be.\n    const viewsToRemove = viewStack.views.filter(v => v.prevId === view.id);\n    viewsToRemove.forEach(v => {\n      // Don't remove if view is currently active\n      if (v.id !== this.activeWlPageId) {\n        this.removeOrphanedViews(v, viewStack);\n\n        // If view is not currently visible, go ahead and remove it from DOM\n        const page = this.wlPageElements[v.id];\n        if (page.classList.contains('wl-page-hidden')) {\n          v.show = false;\n          v.isWlRoute = false;\n          v.prevId = undefined;\n          v.key = generateId();\n          delete this.wlPageElements[v.id];\n        }\n        v.mount = false;\n      }\n    });\n  }\n\n  setupWlRouter(\n    id: string,\n    children: any,\n    routerOutlet: HTMLWlRouterOutletElement\n  ) {\n    const views: ViewItem[] = [];\n    let activeId: string | undefined;\n    const wlRouterOutlet = React.Children.only(children) as React.ReactElement;\n    let foundMatch = false;\n    React.Children.forEach(\n      wlRouterOutlet.props.children,\n      (child: React.ReactElement) => {\n        const routeId = generateId();\n        this.routes[routeId] = child;\n        views.push(createViewItem(child, routeId, this.props.history.location));\n      }\n    );\n\n    if (!foundMatch) {\n      const notFoundRoute = views.find(r => {\n        // try to find a route that doesn't have a path or from prop, that will be our not found route\n        return !r.routeData.childProps.path && !r.routeData.childProps.from;\n      });\n      if (notFoundRoute) {\n        notFoundRoute.show = true;\n      }\n    }\n\n    this.registerViewStack(\n      id,\n      activeId,\n      views,\n      routerOutlet,\n      this.props.location\n    );\n\n    function createViewItem(\n      child: React.ReactElement<any>,\n      routeId: string,\n      location: HistoryLocation\n    ) {\n      const viewId = generateId();\n      const key = generateId();\n\n      // const route = child;\n      const matchProps = {\n        exact: child.props.exact,\n        path: child.props.path || child.props.from,\n        component: child.props.component,\n      };\n      const match: WlRouteData['match'] = matchPath(\n        location.pathname,\n        matchProps\n      );\n      const view: ViewItem<WlRouteData> = {\n        id: viewId,\n        key,\n        routeData: {\n          match,\n          childProps: child.props,\n        },\n        routeId,\n        mount: true,\n        show: !!match,\n        isWlRoute: false,\n      };\n      if (match && view.isWlRoute) {\n        activeId = viewId;\n      }\n      if (!foundMatch && match) {\n        foundMatch = true;\n      }\n      return view;\n    }\n  }\n\n  registerViewStack(\n    stack: string,\n    activeId: string | undefined,\n    stackItems: ViewItem[],\n    routerOutlet: HTMLWlRouterOutletElement,\n    _location: HistoryLocation\n  ) {\n    this.setState(\n      prevState => {\n        const prevViewStacks = Object.assign(\n          new ViewStacks(),\n          prevState.viewStacks\n        );\n        const newStack: ViewStack = {\n          id: stack,\n          views: stackItems,\n        };\n        this.routerOutlets[stack] = routerOutlet;\n        if (activeId) {\n          this.activeWlPageId = activeId;\n        }\n        prevViewStacks.set(stack, newStack);\n        return {\n          viewStacks: prevViewStacks,\n        };\n      },\n      () => {\n        this.setupRouterOutlet(routerOutlet);\n      }\n    );\n  }\n\n  async setupRouterOutlet(routerOutlet: HTMLWlRouterOutletElement) {\n    const canStart = () => {\n      const swipeEnabled = false;\n      if (swipeEnabled) {\n        const { view } = this.state.viewStacks.findViewInfoById(\n          this.activeWlPageId\n        );\n        return !!(view && view.prevId);\n      } else {\n        return false;\n      }\n    };\n\n    const onStart = () => {\n      this.navigateBack();\n    };\n    routerOutlet.swipeHandler = {\n      canStart,\n      onStart,\n      onEnd: _shouldContinue => true,\n    };\n  }\n\n  removeViewStack(stack: string) {\n    const viewStacks = Object.assign(new ViewStacks(), this.state.viewStacks);\n    viewStacks.delete(stack);\n    this.setState({\n      viewStacks,\n    });\n  }\n\n  syncView(page: HTMLElement, viewId: string) {\n    const viewStacks = Object.assign(new ViewStacks(), this.state.viewStacks);\n    const { view } = viewStacks.findViewInfoById(viewId);\n    if (view) {\n      view.isWlRoute = true;\n      this.wlPageElements[view.id] = page;\n      this.setActiveView(\n        this.state.location || this.props.location,\n        this.state.action!,\n        viewStacks\n      );\n    }\n  }\n\n  syncRoute(routerOutlet: any) {\n    const wlRouterOutlet = React.Children.only(\n      routerOutlet\n    ) as React.ReactElement;\n\n    React.Children.forEach(\n      wlRouterOutlet.props.children,\n      (child: React.ReactElement) => {\n        for (const routeKey in this.routes) {\n          const route = this.routes[routeKey];\n          if (\n            (route.props.path || route.props.from) ===\n              (child.props.path || child.props.from) &&\n            route.props.exact === child.props.exact &&\n            route.props.to === child.props.to\n          ) {\n            this.routes[routeKey] = child;\n          }\n        }\n      }\n    );\n  }\n\n  private async commitView(\n    enteringEl: HTMLElement,\n    leavingEl: HTMLElement,\n    wlRouterOutlet: HTMLWlRouterOutletElement,\n    direction?: NavDirection,\n    showGoBack?: boolean,\n    leavingViewHtml?: string\n  ) {\n    if (!this.firstRender) {\n      if (!('componentOnReady' in wlRouterOutlet)) {\n        await waitUntilRouterOutletReady(wlRouterOutlet);\n      }\n\n      if (enteringEl === leavingEl && direction && leavingViewHtml) {\n        // If a page is transitioning to another version of itself\n        // we clone it so we can have an animation to show\n        const newLeavingElement = clonePageElement(leavingViewHtml);\n        wlRouterOutlet.appendChild(newLeavingElement);\n        await wlRouterOutlet.commit(enteringEl, newLeavingElement, {\n          deepWait: true,\n          duration: direction === undefined ? 0 : undefined,\n          direction,\n          showGoBack,\n          progressAnimation: false,\n        });\n        wlRouterOutlet.removeChild(newLeavingElement);\n      } else {\n        await wlRouterOutlet.commit(enteringEl, leavingEl, {\n          deepWait: true,\n          duration: direction === undefined ? 0 : undefined,\n          direction,\n          showGoBack,\n          progressAnimation: false,\n        });\n      }\n\n      if (leavingEl && enteringEl !== leavingEl) {\n        /** add hidden attributes */\n        leavingEl.classList.add('wl-page-hidden');\n        leavingEl.setAttribute('aria-hidden', 'true');\n      }\n    } else {\n      enteringEl.classList.remove('wl-page-invisible');\n      enteringEl.style.zIndex = '101';\n      enteringEl.dispatchEvent(new Event('wlViewWillEnter'));\n      enteringEl.dispatchEvent(new Event('wlViewDidEnter'));\n      this.firstRender = false;\n    }\n  }\n\n  handleNavigate(\n    wlRouteAction: WlRouteAction,\n    path: string,\n    direction?: RouterDirection\n  ) {\n    this.currentWlRouteAction = wlRouteAction;\n    switch (wlRouteAction) {\n      case 'push':\n        this.currentRouteDirection = direction;\n        this.props.history.push(path);\n        break;\n      case 'pop':\n        this.currentRouteDirection = direction || 'back';\n        this.props.history.replace(path);\n        break;\n      case 'replace':\n        this.currentRouteDirection = 'none';\n        this.props.history.replace(path);\n        break;\n    }\n  }\n\n  navigateBack(defaultHref?: string) {\n    const { view: leavingView } = this.state.viewStacks.findViewInfoById(\n      this.activeWlPageId\n    );\n    if (leavingView) {\n      if (leavingView.id === leavingView.prevId) {\n        const previousLocation = this.locationHistory.previous();\n        if (previousLocation) {\n          this.handleNavigate(\n            'pop',\n            previousLocation.pathname + previousLocation.search\n          );\n        } else {\n          defaultHref && this.handleNavigate('pop', defaultHref);\n        }\n      } else {\n        const { view: enteringView } = this.state.viewStacks.findViewInfoById(\n          leavingView.prevId\n        );\n        if (enteringView) {\n          const lastLocation = this.locationHistory.findLastLocationByUrl(\n            enteringView.routeData.match!.url\n          );\n          if (lastLocation) {\n            this.handleNavigate(\n              'pop',\n              lastLocation.pathname + lastLocation.search\n            );\n          } else {\n            this.handleNavigate('pop', enteringView.routeData.match!.url);\n          }\n        } else {\n          const currentLocation = this.locationHistory.previous();\n          if (currentLocation) {\n            this.handleNavigate(\n              'pop',\n              currentLocation.pathname + currentLocation.search\n            );\n          } else {\n            if (defaultHref) {\n              this.handleNavigate('pop', defaultHref);\n            }\n          }\n        }\n      }\n    } else {\n      if (defaultHref) {\n        this.handleNavigate('replace', defaultHref, 'back');\n      }\n    }\n  }\n\n  render() {\n    return (\n      <RouteManagerContext.Provider value={this.state}>\n        <NavManager\n          {...this.props}\n          onNavigateBack={this.navigateBack}\n          onNavigate={this.handleNavigate}\n        >\n          {this.props.children}\n        </NavManager>\n      </RouteManagerContext.Provider>\n    );\n  }\n}\n\nfunction clonePageElement(leavingViewHtml: string) {\n  const newEl = document.createElement('div');\n  newEl.innerHTML = leavingViewHtml;\n  newEl.classList.add('wl-page-hidden');\n  newEl.style.zIndex = '';\n  // Remove an existing back button so the new element doesn't get two of them\n  const wlBackButton = newEl.getElementsByTagName('wl-back-button');\n  if (wlBackButton[0]) {\n    wlBackButton[0].innerHTML = '';\n  }\n  return newEl.firstChild as HTMLElement;\n}\n\nasync function waitUntilRouterOutletReady(\n  wlRouterOutlet: HTMLWlRouterOutletElement\n) {\n  if ('componentOnReady' in wlRouterOutlet) {\n    return;\n  } else {\n    setTimeout(() => {\n      waitUntilRouterOutletReady(wlRouterOutlet);\n    }, 0);\n  }\n}\n\nexport const RouteManagerWithRouter = withRouter(RouteManager);\nRouteManagerWithRouter.displayName = 'RouteManager';\n"]}